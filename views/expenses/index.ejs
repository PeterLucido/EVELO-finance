<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/expenses/index.css" />
<%- include('../partials/nav') %>

<main>
  <h1>Expenses</h1>
  <table id="list">
    <thead>
      <tr>
        <th>Expense</th>
        <th>Cost</th>
      </tr>
    </thead>
    <tbody>
      <% expenses.forEach((expense) => { %>
      <tr>
        <td><%= expense.category %></td>
        <td><%= expense.amount %></td>
        <td><a href="/expenses/<%= expense._id %>">DETAILS</a></td>
        <td>
          <form action="/expenses/<%= expense._id %>?_method=DELETE" method="POST">
            <button class="deleteBtn" type="submit">X</button>
          </form>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
  <div>
    <h2>Total Spend:</h2>
    <p>
      <% 
        let totalSpend = 0
        expenses.forEach((expense) => { 
          totalSpend += parseInt(expense.amount)
        })
      %>
      $<%= totalSpend %>
    </p>
  </div>
</main>

<%- include('../partials/footer') %>